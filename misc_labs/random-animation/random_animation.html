<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        /* border: dashed red; */
      }

      #root {
        width: 100vw;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-wrap: wrap;
      }

      .circle {
        width: 50px;
        height: 50px;
        border: dashed 0.5px salmon;
        transition: all eoase-in-out 200ms;
        border-radius: 100%;
        overflow: hidden;
      }

      .active {
        background-color: rgba(250, 128, 114, 1);
        scale: 2;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script>
      // Setup
      const root = document.getElementById("root");
      const nCircles = 200;

      for (let i = 0; i < nCircles; i++) {
        let newEl = document.createElement("div");
        newEl.classList.add("circle");
        root.appendChild(newEl);
      }

      const getRndAnimType = () => {
        const animTypes = [
          "bounce",
          "flash",
          "pulse",
          "rubberBand",
          "shakeX",
          "shakeY",
          "headShake",
          "swing",
          "tada",
          "wobble",
          "jello",
          "heartBeat",
        ];

        return animTypes[Math.floor(Math.random() * animTypes.length)];
      };

      //select all .thing elements
      let elements = document.querySelectorAll(".circle");

      //set up event listeners for all elements
      for (const element of elements) {
        //mouse enter
        element.addEventListener("mouseenter", () => {
          //make sure we're not already animating
          if (!element.classList.contains("animate__animated")) {
            let animClass = `animate__${getRndAnimType()}`;
            console.log(animClass);
            //add animation class
            element.classList.add("animate__animated", animClass, "active");

            //add event listeners to remove the animation class when it's done
            element.addEventListener("animationend", function _listener() {
              element.classList.remove("animate__animated", animClass);
              if (!element.matches(":hover")) {
                element.classList.remove("active");
              }
              //remove the animationend listener to not stack them all up
              element.removeEventListener("animationend", _listener);
            });
          }
        });

        element.addEventListener("mouseout", () => {
          if (!element.classList.contains("animate__animated")) {
            element.classList.remove("active");
          }
        });
      }
    </script>
  </body>
</html>
